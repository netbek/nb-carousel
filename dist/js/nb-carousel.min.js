/*
 * nb-carousel
 * 
 * @author Hein Bekker <hein@netbek.co.za>
 * @copyright (c) 2015 Hein Bekker
 * @license http://www.gnu.org/licenses/agpl-3.0.txt AGPLv3
 */
!function(a,b){"use strict";b.module("nb.carousel",["pasvaz.bindonce","ngAnimate","nb.gsap","nb.lodash","nb.throbber","nb.window","nb.carousel.templates"])}(window,window.angular),function(a,b){"use strict";function c(a){return{addClass:function(b,c,d){var e=b.isolateScope(),f=e.transitionDuration(),g=e.transitionEase();if("fade-in"==c)a.TweenMax.fromTo(b,f/2,{opacity:0},{ease:g,opacity:1,onComplete:d,overwrite:"all"});else if("active"==c){var h="left"!==e.direction()?"-100%":"100%";a.TweenMax.fromTo(b,f,{left:h},{ease:g,left:"0%",onComplete:d,overwrite:"all"}),a.TweenMax.fromTo(b,f/2,{opacity:0},{delay:f/2,ease:g,opacity:1})}else d()},removeClass:function(b,c,d){var e=b.isolateScope(),f=e.transitionDuration(),g=e.transitionEase();if("active"==c){var h="left"===e.direction()?"-100%":"100%";a.TweenMax.to(b,f,{ease:g,left:h,onComplete:d,overwrite:"all"}),a.TweenMax.to(b,f/4,{opacity:0})}else d()}}}b.module("nb.carousel").animation(".slide-animation",c),c.$inject=["GSAP"]}(window,window.angular),function(a,b){"use strict";function c(a,c,d,e,f,g,h,i,j){function k(a,b){v=a,w=b,l()}function l(){m(),a.slides[v].complete?a["goto"](v,w):u=e(l,50)}function m(){u&&(e.cancel(u),u=null)}function n(){y&&y.$element.removeClass("active"),z&&z.$element.addClass("active")}function o(a){return x=a,function(){F||(x(),x=null)}}function p(){q();var b=+a.interval;!isNaN(b)&&b>0&&(t=e(r,b))}function q(){t&&(e.cancel(t),t=null)}function r(){var b=+a.interval;A.isPlaying&&!isNaN(b)&&b>0?a.next():a.pause()}function s(){if(G&&H){var d=.8*i.windowHeight(),e=c[0].scrollWidth,f=Math.min(d,H/G*e);c.css("height",f+"px"),b.forEach(a.slides,function(a){a.resize(e,f)})}}var t,u,v,w,x,y,z,A=this,B=b.element(h),C=[],D=[],E=!0,F=!1,G=0,H=0;a.complete=!1,a.slides=[],a.direction=A.direction="left",a.currentIndex=-1,a.isPlaying=A.isPlaying=!1,a.disabled=A.disabled=!1,a.isCurrentSlideIndex=function(b){return a.currentIndex===b},a["goto"]=function(c,e){if(m(),!x&&a.currentIndex!==c){if(y=a.slides[a.currentIndex],z=a.slides[c],!z.complete)return void k(c,e);f.addClass(z.$element,"fade-in",b.noop),b.isUndefined(e)&&(e=c<a.currentIndex?"left":"right"),a.direction=A.direction=e,a.currentIndex=c,p(),E||a.noTransition?(E=!1,n()):D.push(d(function(){if(!F){{z.$element[0].offsetWidth}f.removeClass(y.$element,"active",b.noop),f.addClass(z.$element,"active",o(n))}}))}},a.prev=function(){var b=a.currentIndex>0?a.currentIndex-1:a.slides.length-1;a["goto"](b,"left")},a.next=function(){var b=a.currentIndex<a.slides.length-1?a.currentIndex+1:0;a["goto"](b,"right")},a.play=function(){A.isPlaying||(a.isPlaying=A.isPlaying=!0,p())},a.pause=function(){a.noPause||(a.isPlaying=A.isPlaying=!1,q())},A.addSlide=function(b,c){b.$element=c,a.slides.push(b),1===a.slides.length||b.active?(a["goto"](a.slides.length-1),1!=a.slides.length||A.disabled||a.play()):b.active=!1},A.removeSlide=function(b){g.TweenMax.killTweensOf(b.$element);var c=a.slides.indexOf(b);a.slides.splice(c,1),a.slides.length>0&&b.active?a["goto"](c>=a.slides.length?c-1:c):a.currentIndex>c&&a.currentIndex--},A.setSlideComplete=function(){var c=a.slides.length,d=0;b.forEach(a.slides,function(a){a.complete&&d++}),a.complete=c===d},A.setMaxWidth=function(a){a>G&&(G=a,s())},A.setMaxHeight=function(a){a>H&&(H=a,s())},C.push(a.$watch(function(){return c.hasClass("ng-hide")},function(b){a.disabled=A.disabled=b,a.slides.length>0&&(b?a.pause():(a["goto"](0),a.play()))})),C.push(a.$watch("interval",p)),C.push(a.$watch("noTransition",function(a){A.noTransition=a})),C.push(a.$watch("transitionDuration",function(a){A.transitionDuration=a})),C.push(a.$watch("transitionEase",function(a){A.transitionEase=a}));var I=j.throttle(function(){s(!0)},60);B.on("resize",I),a.$on("$destroy",function(){F=!0,b.forEach(C,function(a){a()}),b.forEach(D,function(a){d.cancel(a)}),m(),q(),B.off("resize",I)})}b.module("nb.carousel").controller("nbCarouselController",c),c.$inject=["$scope","$element","$timeout","$interval","$animate","GSAP","$window","nbWindow","_"]}(window,window.angular),function(a,b){"use strict";function c(){return{restrict:"EA",transclude:!0,replace:!0,controller:"nbCarouselController",templateUrl:"templates/nb-carousel.html",scope:{interval:"=",noTransition:"=",noPause:"=",transitionDuration:"@?",transitionEase:"@?"}}}b.module("nb.carousel").directive("nbCarousel",c)}(window,window.angular),function(a,b){"use strict";function c(){var b={transitionDuration:1,transitionEase:"easeNoneLinear"};return{set:function(c){b=a.merge(!0,b,c)},$get:function(){return b}}}b.module("nb.carousel").provider("nbCarouselConfig",c)}(window,window.angular),function(a,b){"use strict";function c(){return{require:"^nbCarousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"templates/nb-carousel-slide.html",scope:{active:"=?"},link:function(a,c,d,e){var f=[],g=c.find("picture").scope();a.complete=!1,a.direction=function(){return e.direction},a.transitionDuration=function(){return e.transitionDuration},a.transitionEase=function(){return e.transitionEase},a.resize=function(a,b){g.resize(a,b)},function(){var b=g.$watch("complete",function(c){c&&(a.complete=c,e.setSlideComplete(a),b())});f.push(b)}(),function(){var a=g.$watch("sourceWidth",function(b){b&&(e.setMaxWidth(b),a())});f.push(a)}(),function(){var a=g.$watch("sourceHeight",function(b){b&&(e.setMaxHeight(b),a())});f.push(a)}(),a.$on("$destroy",function(){b.forEach(f,function(a){a()}),e.removeSlide(a)}),e.addSlide(a,c)}}}b.module("nb.carousel").directive("nbCarouselSlide",c)}(window,window.angular),function(a,b){"use strict";function c(a){return{restrict:"EA",link:function(b,c,d){b.sourceWidth=0,b.sourceHeight=0,b.resize=function(d,e){if(b.sourceWidth&&b.sourceHeight){var f=a.scale(b.sourceWidth,b.sourceHeight,d,e);c.css({left:f.x+"px",top:f.y+"px",width:f.width+"px",height:f.height+"px"})}},d.$observe("source-width",function(a){a&&(b.sourceWidth=Number(a))}),d.$observe("source-height",function(a){a&&(b.sourceHeight=Number(a))})}}}b.module("nb.carousel").directive("nbCarouselSlidePicture",c),c.$inject=["_"]}(window,window.angular),angular.module("nb.carousel.templates",["templates/nb-carousel-slide.html","templates/nb-carousel.html"]),angular.module("templates/nb-carousel-slide.html",[]).run(["$templateCache",function(a){a.put("templates/nb-carousel-slide.html",'<div class="slide slide-animation nonDraggableImage" ng-transclude></div>')}]),angular.module("templates/nb-carousel.html",[]).run(["$templateCache",function(a){a.put("templates/nb-carousel.html",'<div class="carousel"\n	 ng-mouseenter="pause()"\n	 ng-mouseleave="play()"\n	 ng-swipe-right="prev()"\n	 ng-swipe-left="next()">\n	<div class="carousel-inner" ng-transclude></div>\n\n	<ol class="carousel-indicators" ng-show="slides.length > 1">\n		<li ng-repeat="slide in slides track by $index"\n			ng-class="{active: isCurrentSlideIndex($index)}"\n			ng-click="goto($index);"></li>\n	</ol>\n\n	<div ng-hide="complete" nb-throbber></div>\n\n	<a class="left carousel-control"\n	   ng-click="prev()"\n	   ng-show="slides.length > 1">\n		<span nb-icon\n			  data-id="arrow-left"\n			  data-color="blue"></span>\n	</a>\n	<a class="right carousel-control"\n	   ng-click="next()"\n	   ng-show="slides.length > 1">\n		<span nb-icon\n			  data-id="arrow-right"\n			  data-color="blue"></span>\n	</a>\n</div>\n')}]);