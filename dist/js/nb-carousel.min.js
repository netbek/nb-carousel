/*
 * nb-carousel
 * 
 * @author Hein Bekker <hein@netbek.co.za>
 * @copyright (c) 2015 Hein Bekker
 * @license http://www.gnu.org/licenses/agpl-3.0.txt AGPLv3
 */
!function(a,b){"use strict";b.module("nb.carousel",["ngAnimate","nb.gsap","nb.lodash","nb.throbber","nb.window","nb.carousel.templates"])}(window,window.angular),function(a,b){"use strict";function c(a){return{addClass:function(b,c,d){var e=b.isolateScope(),f=e.transitionDuration(),g=e.transitionEase();if("fade-in"==c)a.TweenMax.fromTo(b,f/2,{opacity:0},{ease:g,opacity:1,onComplete:d,overwrite:"all"});else if("active"==c){var h="left"!==e.direction()?"-100%":"100%";a.TweenMax.fromTo(b,f,{left:h},{ease:g,left:"0%",onComplete:d,overwrite:"all"}),a.TweenMax.fromTo(b,f/2,{opacity:0},{delay:f/2,ease:g,opacity:1})}else d()},removeClass:function(b,c,d){var e=b.isolateScope(),f=e.transitionDuration(),g=e.transitionEase();if("active"==c){var h="left"===e.direction()?"-100%":"100%";a.TweenMax.to(b,f,{ease:g,left:h,onComplete:d,overwrite:"all"}),a.TweenMax.to(b,f/4,{opacity:0})}else d()}}}b.module("nb.carousel").animation(".slide-animation",c),c.$inject=["GSAP"]}(window,window.angular),function(a,b){"use strict";function c(a,c,d,e,f,g,h,i,j){function k(){C||(w&&w.$element.removeClass("active"),x&&x.$element.addClass("active"))}function l(a,b){u=a,v=b,m()}function m(){n(),a.slides[u].complete?a.gotoIndex(u,v):t=e(m,50)}function n(){t&&(e.cancel(t),t=null)}function o(){p();var b=+a.interval;!isNaN(b)&&b>0&&(s=e(q,b))}function p(){s&&(e.cancel(s),s=null)}function q(){var b=+a.interval;y.isPlaying&&!isNaN(b)&&b>0?a.next():a.pause()}function r(){if(E&&F){var d=.8*i.windowHeight(),e=c[0].scrollWidth,f=Math.min(d,F/E*e);e&&f&&(c.css("height",f+"px"),b.forEach(a.slides,function(a){a.resize(e,f)}))}}var s,t,u,v,w,x,y=this,z=b.element(h),A=[],B=!0,C=!1,D=!1,E=0,F=0;a.complete=!1,a.slides=[],a.direction=y.direction="left",a.currentIndex=-1,a.isPlaying=y.isPlaying=!1,a.isCurrentSlideIndex=function(b){return a.currentIndex===b},a.gotoIndex=function(c,e){if(n(),!D&&a.currentIndex!==c){if(w=a.slides[a.currentIndex],x=a.slides[c],!x.complete)return void l(c,e);f.addClass(x.$element,"fade-in",b.noop),b.isUndefined(e)&&(e=c<a.currentIndex?"left":"right"),a.direction=y.direction=e,a.currentIndex=c,o(),B||a.noTransition?(B=!1,k()):d(function(){if(!C){D=!0;{x.$element[0].offsetWidth}f.removeClass(w.$element,"active",b.noop),f.addClass(x.$element,"active",k).then(function(){D=!1})}})}},a.prev=function(){var b=a.currentIndex>0?a.currentIndex-1:a.slides.length-1;a.gotoIndex(b,"left")},a.next=function(){var b=a.currentIndex<a.slides.length-1?a.currentIndex+1:0;a.gotoIndex(b,"right")},a.play=function(){y.isPlaying||(a.isPlaying=y.isPlaying=!0,o())},a.pause=function(){a.noPause||(a.isPlaying=y.isPlaying=!1,p())},y.addSlide=function(b,c){b.$element=c,a.slides.push(b),1===a.slides.length||b.active?(a.gotoIndex(a.slides.length-1),1==a.slides.length&&a.play()):b.active=!1},y.removeSlide=function(b){g.TweenMax.killTweensOf(b.$element);var c=j.indexOf(a.slides,b);a.slides.splice(c,1),a.slides.length>0&&b.active?a.gotoIndex(c>=a.slides.length?c-1:c):a.currentIndex>c&&a.currentIndex--},y.setSlideComplete=function(){var c=a.slides.length,d=0;b.forEach(a.slides,function(a){a.complete&&d++}),a.complete=c===d},y.setMaxWidth=function(a){a>E&&(E=a,r())},y.setMaxHeight=function(a){a>F&&(F=a,r())},A.push(a.$watch("interval",o)),A.push(a.$watch("noTransition",function(a){y.noTransition=a})),A.push(a.$watch("transitionDuration",function(a){y.transitionDuration=a})),A.push(a.$watch("transitionEase",function(a){y.transitionEase=a}));var G=j.throttle(function(){r(!0)},60);z.on("resize",G),a.$on("$destroy",function(){C=!0,b.forEach(A,function(a){a()}),n(),p(),z.off("resize",G)})}b.module("nb.carousel").controller("nbCarouselController",c),c.$inject=["$scope","$element","$timeout","$interval","$animate","GSAP","$window","nbWindow","_"]}(window,window.angular),function(a,b){"use strict";function c(){return{restrict:"EA",transclude:!0,replace:!0,controller:"nbCarouselController",templateUrl:"templates/nb-carousel.html",scope:{interval:"=",noTransition:"=",noPause:"=",transitionDuration:"@?",transitionEase:"@?"}}}b.module("nb.carousel").directive("nbCarousel",c)}(window,window.angular),function(a,b){"use strict";function c(){var a={transitionDuration:1,transitionEase:"easeNoneLinear"};return{set:function(b){_.merge(a,b)},$get:function(){return a}}}b.module("nb.carousel").provider("nbCarouselConfig",c)}(window,window.angular),function(a,b){"use strict";function c(){return{require:"^nbCarousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"templates/nb-carousel-slide.html",scope:{active:"=?"},link:function(a,c,d,e){var f=[],g=c.find("picture").scope();a.complete=!1,a.direction=function(){return e.direction},a.transitionDuration=function(){return e.transitionDuration},a.transitionEase=function(){return e.transitionEase},a.resize=function(a,b){g.resize(a,b)},function(){var b=g.$watch("complete",function(c){c&&(a.complete=c,e.setSlideComplete(a),b())});f.push(b)}(),function(){var a=g.$watch("sourceWidth",function(b){b&&(e.setMaxWidth(b),a())});f.push(a)}(),function(){var a=g.$watch("sourceHeight",function(b){b&&(e.setMaxHeight(b),a())});f.push(a)}(),a.$on("$destroy",function(){b.forEach(f,function(a){a()}),e.removeSlide(a)}),e.addSlide(a,c)}}}b.module("nb.carousel").directive("nbCarouselSlide",c)}(window,window.angular),function(a,b){"use strict";function c(a){return{restrict:"EA",link:function(b,c,d){function e(b,d,e,f){var g=a.scale(b,d,e,f);c.css({left:g.x+"px",top:g.y+"px",width:g.width+"px",height:g.height+"px"})}var f;b.sourceWidth=0,b.sourceHeight=0,b.resize=function(a,c){f&&f(),b.sourceWidth&&b.sourceHeight?e(b.sourceWidth,b.sourceHeight,a,c):f=b.$watch(function(){return{sourceWidth:b.sourceWidth,sourceHeight:b.sourceHeight}},function(b){b.sourceWidth&&b.sourceHeight&&(e(b.sourceWidth,b.sourceHeight,a,c),f(),f=null)})},b.$on("$destroy",function(){f&&f()}),d.$observe("sourceWidth",function(a){a&&(b.sourceWidth=Number(a))}),d.$observe("sourceHeight",function(a){a&&(b.sourceHeight=Number(a))})}}}b.module("nb.carousel").directive("nbCarouselSlidePicture",c),c.$inject=["_","$q"]}(window,window.angular),angular.module("nb.carousel.templates",["templates/nb-carousel-slide.html","templates/nb-carousel.html"]),angular.module("templates/nb-carousel-slide.html",[]).run(["$templateCache",function(a){a.put("templates/nb-carousel-slide.html",'<div class="slide slide-animation nonDraggableImage" ng-transclude></div>')}]),angular.module("templates/nb-carousel.html",[]).run(["$templateCache",function(a){a.put("templates/nb-carousel.html",'<div class="carousel"\n	 ng-mouseenter="pause()"\n	 ng-mouseleave="play()"\n	 ng-swipe-right="prev()"\n	 ng-swipe-left="next()">\n	<div class="carousel-inner" ng-transclude></div>\n\n	<ol class="carousel-indicators" ng-show="slides.length > 1">\n		<li ng-repeat="slide in slides track by $index"\n			ng-class="{active: isCurrentSlideIndex($index)}"\n			ng-click="goto($index);"></li>\n	</ol>\n\n	<div ng-hide="complete" nb-throbber></div>\n\n	<a class="left carousel-control"\n	   ng-click="prev()"\n	   ng-show="slides.length > 1">\n		<span nb-icon-once\n			  data-id="arrow-left"\n			  data-color="blue"></span>\n	</a>\n	<a class="right carousel-control"\n	   ng-click="next()"\n	   ng-show="slides.length > 1">\n		<span nb-icon-once\n			  data-id="arrow-right"\n			  data-color="blue"></span>\n	</a>\n</div>\n')}]);